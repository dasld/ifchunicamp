%%
%% Customizações do abnTeX2 (http://www.abntex.net.br/) para dissertações e teses do IFCH/Unicamp
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% The Current Maintainer of this work is Daniel Alves da Silva Lopes Diniz, diniz.cpm <at> gmail.com
%%
%% Further information about abnTeX2 are available on http://www.abntex.net.br/
%%

% ---
% INICIO DAS CUSTOMIZAÇÔES PARA O IFCH/UNICAMP
% ---

% Este pacote procura alterar a capa e a folha de rosto da classe abnTeX2 de modo a
% ficarem compatíveis com as normas para Dissertações e Teses do IFCH/Unicamp.
% Essas normas estão disponíveis em
% https://www.ifch.unicamp.br/ifch/pf-ifch/public-files/pos/procedimentos/manual_defesa_v29_2018.pdf
% (acesso em 22/06/2019).

\ProvidesPackage{ifchunicamp}[2020/02/19]
\RequirePackage[utf8]{inputenc}                 % este documento deve ser lido em UTF-8
%\RequirePackage{tikz}
\RequirePackage{bookmark}


% baseado em https://github.com/abntex/abntex2/blob/master/tex/latex/abntex2/abntex2.cls#L694
\providecommand{\thesubtitulo}[1]{}
\newcommand{\subtitulo}[1]{\renewcommand{\thesubtitulo}{#1}}
\newcommand{\imprimirsubtitulo}{\thesubtitulo}

\renewcommand{\imprimircapa}{%
\pdfbookmark{Capa}{capa}% cf. abntex2.pdf p13 pra mais informações
\begin{capa}
\setlength{\parindent}{0cm}
% altura mínima: 10 mm
% altura máxima em papel A4: 17,82mm (6% de 297mm)
% https://www.unicamp.br/unicamp/logotipo
% https://tex.stackexchange.com/a/244103/90645
%\begin{tikzpicture}[remember picture,overlay]
%  \node[xshift=3cm,yshift=-3cm,anchor=south east] at (current page.north west){%
%  \includegraphics[height=15mm]{logo.pdf}};%2.5\onelineskip
%\end{tikzpicture}
% 13,91mm é a média entre as alturas mínima e máxima
\includegraphics[height=13.91mm]{logo.pdf}

\centering\ABNTEXchapterfont%
\textbf{\Large\MakeUppercase{\imprimirinstituicao}}

\vspace*{3\onelineskip}%
{\large\MakeUppercase{\imprimirautor}}

\vfill%
\begin{center}
  \LARGE%
  \textbf{\MakeUppercase{\imprimirtitulo}}:

  \MakeUppercase{\imprimirsubtitulo}
\end{center}

\vfill%
\large%
\MakeUppercase{\imprimirlocal}\\
\imprimirdata
\end{capa}
}

%-------------------------------------------------------------------------------
% folha de rosto
\renewcommand{\folhaderostocontent}{%
\setlength{\parindent}{0cm}%
\centering%
{\rmfamily\large\MakeUppercase{\imprimirautor}}

\vfill%
\begin{center}
\ABNTEXchapterfont\Large%
  \MakeUppercase{\imprimirtitulo}:

  \MakeUppercase{\imprimirsubtitulo}
\end{center}

\vfill%
\abntex@ifnotempty{\imprimirpreambulo}{%
\strut\hfill%
\begin{minipage}{.5\textwidth}
\SingleSpacing\imprimirpreambulo
\end{minipage}%
}
\flushleft%
\vspace*{\onelineskip}%
\textit{\imprimirorientadorRotulo}:\enspace\imprimirorientador\\
\textit{\imprimircoorientadorRotulo}:\enspace\imprimircoorientador

\vspace*{2cm}%
\begin{minipage}{.5\textwidth}
\small\MakeUppercase{%
Este exemplar corresponde à versão final da dissertação defendida pelo aluno \imprimirautor, orientada por \imprimirorientador\ e coorientada por \imprimircoorientador.%
}\end{minipage}%

\vfill%
\centering\large%\bfseries%
\MakeUppercase{\imprimirlocal}\\
\imprimirdata%
}

% ---
% FIM DAS CUSTOMIZAÇÔES
% ---
